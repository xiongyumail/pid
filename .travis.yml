language: cpp
compiler:
    - gcc
    - clang

before_install:
    - sudo pip install pyaml jinja2
    - pushd ..
    - wget "https://github.com/cpputest/cpputest.github.io/blob/master/releases/cpputest-3.6.tar.gz?raw=true" -O cpputest.tar.gz
    - tar -xzf cpputest.tar.gz 
    - cd cpputest-3.6/
    - ./configure
    - make
    - sudo make install
    - popd

    - git clone https://github.com/cvra/packager ../packager
    - git reset --hard d1524741015c4f0a780435ffab7a9c994373bf81

before_script:
    - ../packager/packager.py
    - mkdir build/
    - cd build/
    - cmake ..

script: 
    - make
    - ./tests
